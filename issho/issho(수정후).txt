//현재 테이블 notice ----------------------------------------------------
CREATE TABLE notice (
	notice_seq	NUMBER		NOT NULL,
	prj_domain	VARCHAR2(10)		NOT NULL,
	notice_name	VARCHAR2(100)		NOT NULL,
	notice_writer	VARCHAR2(70)		NOT NULL,
	notice_contents	VARCHAR2(3000)		NOT NULL,
	notice_ogFilr	VARCHAR2(1000)		NULL,
	notice_saveFile	VARCHAR2(1000)		NULL,
	notice_date	DATE		NULL,
	notice_hits 	NUMBER	DEFAULT 0 NULL
);

//문제점
// 필드명 수정 엽부 결정 필요(문서와 상이)(?) notice_ogFilr, notice_name, notice_contents
// notice_name : 너무 짧음


// 수정 필요 사항 ----------------------------------------------------

//현재 테이블 notice
CREATE TABLE noticeComment (
	noticeCmt_seq	NUMBER		NOT NULL,
	notice_seq	NUMBER		NOT NULL,
	noticeCmt_writer	VARCHAR2(70)		NOT NULL,
	noticeCmt_contents	VARCHAR2(3000)		NOT NULL,
	noticeCmt_date	DATE DEFAULT sysdate	NULL
);

//문제점
//notice_seq 컬럼에 delete on cascade추가해야
//
//	notice_seq	NUMBER		NOT NULL,
//	행을  아래와 같이 바꾸어야
//	notice_seq	NUMBER		NOT NULL references notice(notice_seq) on delete cascade, 로 바꿔야


//임시로 기존 CONSTRAINT 2개 없애고 cascade 들어간 것으로 2개 반영
ALTER TABLE noticeComment
DROP CONSTRAINT FK_NOTICE_TO_NOTICECOMMENT_1;

ALTER TABLE noticeFile
DROP CONSTRAINT FK_NOTICE_TO_NOTICEFILE_1;

ALTER TABLE noticeComment
ADD CONSTRAINT noticeCommentCascade
FOREIGN KEY (notice_seq)
REFERENCES notice(notice_seq)
ON DELETE CASCADE;

ALTER TABLE noticeFile
ADD CONSTRAINT noticeFileCascade
FOREIGN KEY (notice_seq)
REFERENCES notice(notice_seq)
ON DELETE CASCADE;

// CONSTRAINT 적용 전 후 검증용 Sql
select * from noticecomment where notice_seq=214;
select * from notice where notice_seq =214;
delete from notice where notice_seq =214;


//현재 테이블 notice ----------------------------------------------------
CREATE TABLE noticeFile (
	noticeFile_seq	NUMBER		NOT NULL,
	notice_seq	NUMBER		NOT NULL,
	noticeFile_ogFile	VARCHAR2(1000)		NULL,
	noticeFile_saveFile	VARCHAR2(1000)		NULL
);